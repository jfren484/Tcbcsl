@using Tcbcsl.Presentation.Services
@model StandingsModel
@{
    var title = Model.Type + " Standings";
    ViewBag.Title = title + Model.Year.AsTitleSuffix();

    var hackText = new string('X', Model.Groups.SelectMany(g => g.Teams.Select(t => t.TeamName.Length)).Max());
}
@Html.Partial("_YearPartial")
<h2>@title</h2>
<div class="row">
    @foreach (var groupModel in Model.Groups)
    {
        <div class="col-lg-12">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    @groupModel.Name Division
                </div>
                <table class="table table-striped table-bordered table-condensed">
                    <thead>
                        <tr>
                            <th>Team<span class="hidden-xs pseudo-hidden">@hackText</span></th>
                            <th>W</th>
                            <th>L</th>
                            @if (Model.ShowTies) { <th>T</th> }
                            <th>Pct</th>
                            <th>GB</th>
                            <th class="hidden-xs">Div</th>
                            <th class="hidden-xs">RS</th>
                            <th class="hidden-xs">RA</th>
                            <th class="hidden-xs">Streak</th>
                            <th class="hidden-xs">Last 5</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var teamModel in groupModel.Teams)
                        {
                            <tr>
                                <td>@Html.TeamLink(teamModel.TeamName, teamModel.TeamId, Model.Year)</td>
                                <td>@teamModel.Wins</td>
                                <td>@teamModel.Losses</td>
                                @if (Model.ShowTies) { <td>@teamModel.Ties</td> }
                                <td>@teamModel.WinningPercentage.ToString(Consts.Decimal3PlacesFormat)</td>
                                <td>@teamModel.GamesBack.ToString(Consts.GamesBackFormat)</td>
                                <td class="hidden-xs">@ScheduleService.FormatRecord(teamModel.DivisionWins, teamModel.DivisionLosses, teamModel.DivisionTies)</td>
                                <td class="hidden-xs">@teamModel.RunsScored</td>
                                <td class="hidden-xs">@teamModel.RunsAllowed</td>
                                <td class="hidden-xs">@Consts.GameOutcomeVerbs[teamModel.StreakOutcome] @teamModel.StreakCount</td>
                                <td class="hidden-xs">@ScheduleService.FormatRecord(teamModel.Last5Wins, teamModel.Last5Losses, teamModel.Last5Ties)</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    }
</div>
